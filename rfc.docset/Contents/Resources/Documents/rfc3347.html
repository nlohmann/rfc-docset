<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.120" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Identifier" content="urn:ietf:rfc:3347" />
<meta name="DC.Creator" content="Haagens, Randy" />
<meta name="DC.Creator" content="Krueger, Marjorie" />
<meta name="DC.Date.Issued" content="July, 2002" />
<meta name="DC.Title" content="Small Computer Systems Interface protocol over the Internet (iSCSI) Requirements and Design Considerations" />

    <link rel="icon" href="/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="/images/rfc.png" type="image/png" />
    <title>RFC 3347 - Small Computer Systems Interface protocol over the Internet (iSCSI) Requirements and Design Considerations</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgblue"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="../html/" title="Document search and retrieval page">Docs</a>] [<a href="/rfc/rfc3347.txt" title="Plaintext version of this document">txt</a>|<a href="/pdf/rfc3347" title="PDF version of this document">pdf</a>] [<a href="./draft-ietf-ips-iscsi-reqmts.html" title="draft-ietf-ips-iscsi-reqmts">draft-ietf-ips-is...</a>] [<a href="/rfcdiff?difftype=--hwdiff&amp;url2=rfc3347" title="Inline diff (wdiff)">Diff1</a>] [<a href="/rfcdiff?url2=rfc3347" title="Side-by-side diff">Diff2</a>]                 </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Network Working Group                                         M. Krueger
Request for Comments: 3347                                    R. Haagens
Category: Informational                      Hewlett-Packard Corporation
                                                          C. Sapuntzakis
                                                                Stanford
                                                                M. Bakke
                                                           Cisco Systems
                                                               July 2002


  <span class="h1">Small Computer Systems Interface protocol over the Internet (iSCSI)</span>
                <span class="h1">Requirements and Design Considerations</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

Abstract

   This document specifies the requirements iSCSI and its related
   infrastructure should satisfy and the design considerations guiding
   the iSCSI protocol development efforts.  In the interest of timely
   adoption of the iSCSI protocol, the IPS group has chosen to focus the
   first version of the protocol to work with the existing SCSI
   architecture and commands, and the existing TCP/IP transport layer.
   Both these protocols are widely-deployed and well-understood.  The
   thought is that using these mature protocols will entail a minimum of
   new invention, the most rapid possible adoption, and the greatest
   compatibility with Internet architecture, protocols, and equipment.

Conventions used in this document

   This document describes the requirements for a protocol design, but
   does not define a protocol standard.  Nevertheless, the key words
   "<em>MUST</em>", "<em>MUST NOT</em>", "<em>REQUIRED</em>", "<em>SHALL</em>", "<em>SHALL NOT</em>", "<em>SHOULD</em>",
   "<em>SHOULD NOT</em>", "<em>RECOMMENDED</em>",  "<em>MAY</em>", and "<em>OPTIONAL</em>" in this document
   are to be interpreted as described in <a href="./rfc2119.html">RFC-2119</a> [2].








<span class="grey">Krueger, et al.              Informational                      [Page 1]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


Table of Contents

   <a href="#section-1">1</a>.   Introduction.................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>.   Summary of Requirements......................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>.   iSCSI Design Considerations..................................<a href="#page-7">7</a>
   <a href="#section-3.1">3.1</a>. General Discussion...........................................<a href="#page-7">7</a>
   <a href="#section-3.2">3.2</a>. Performance/Cost.............................................<a href="#page-9">9</a>
   <a href="#section-3.3">3.3</a>. Framing.....................................................<a href="#page-11">11</a>
   <a href="#section-3.4">3.4</a>. High bandwidth, bandwidth aggregation.......................<a href="#page-13">13</a>
   <a href="#section-4">4</a>.   Ease of implementation/complexity of protocol...............<a href="#page-14">14</a>
   <a href="#section-5">5</a>.   Reliability and Availability................................<a href="#page-15">15</a>
   <a href="#section-5.1">5.1</a>. Detection of Data Corruption................................<a href="#page-15">15</a>
   <a href="#section-5.2">5.2</a>. Recovery....................................................<a href="#page-15">15</a>
   <a href="#section-6">6</a>.   Interoperability............................................<a href="#page-16">16</a>
   <a href="#section-6.1">6.1</a>. Internet infrastructure.....................................<a href="#page-16">16</a>
   <a href="#section-6.2">6.2</a>. SCSI........................................................<a href="#page-16">16</a>
   <a href="#section-7">7</a>.   Security Considerations.....................................<a href="#page-18">18</a>
   <a href="#section-7.1">7.1</a>. Extensible Security.........................................<a href="#page-18">18</a>
   <a href="#section-7.2">7.2</a>. Authentication..............................................<a href="#page-18">18</a>
   <a href="#section-7.3">7.3</a>. Data Integrity..............................................<a href="#page-19">19</a>
   <a href="#section-7.4">7.4</a>. Data Confidentiality........................................<a href="#page-19">19</a>
   <a href="#section-8">8</a>.   Management..................................................<a href="#page-19">19</a>
   <a href="#section-8.1">8.1</a>. Naming......................................................<a href="#page-20">20</a>
   <a href="#section-8.2">8.2</a>. Discovery...................................................<a href="#page-21">21</a>
   <a href="#section-9">9</a>.   Internet Accessibility......................................<a href="#page-21">21</a>
   <a href="#section-9.1">9.1</a>. Denial of Service...........................................<a href="#page-21">21</a>
   <a href="#section-9.2">9.2</a>. NATs, Firewalls and Proxy servers...........................<a href="#page-22">22</a>
   <a href="#section-9.3">9.3</a>. Congestion Control and Transport Selection..................<a href="#page-22">22</a>
   <a href="#section-10">10</a>.  Definitions.................................................<a href="#page-22">22</a>
   <a href="#section-11">11</a>.  References..................................................<a href="#page-23">23</a>
   <a href="#section-12">12</a>.  Acknowledgements............................................<a href="#page-24">24</a>
   <a href="#section-13">13</a>.  Author's Addresses..........................................<a href="#page-25">25</a>
   <a href="#section-14">14</a>.  Full Copyright Statement....................................<a href="#page-26">26</a>

<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>. Introduction</span>

   The IP Storage Working group is chartered with developing
   comprehensive technology to transport block storage data over IP
   protocols.  This effort includes a protocol to transport the Small
   Computer Systems Interface (SCSI) protocol over the Internet (iSCSI).
   The initial version of the iSCSI protocol will define a mapping of
   SCSI transport protocol over TCP/IP so that SCSI storage controllers
   (principally disk and tape arrays and libraries) can be attached to
   IP networks, notably Gigabit Ethernet (GbE) and 10 Gigabit Ethernet
   (10 GbE).






<span class="grey">Krueger, et al.              Informational                      [Page 2]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   The iSCSI protocol is a mapping of SCSI to TCP, and constitutes a
   "SCSI transport" as defined by the ANSI T10 document SCSI SAM-2
   document [SAM2, p. 3, "Transport Protocols"].

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>. Summary of Requirements</span>

   The iSCSI standard:

   From <a href="#section-3.2">section 3.2</a> Performance/Cost:

      <em>MUST</em> allow implementations to equal or improve on the current
      state of the art for SCSI interconnects.

      <em>MUST</em> enable cost competitive implementations.

      <em>SHOULD</em> minimize control overhead to enable low delay
      communications.

      <em>MUST</em> provide high bandwidth and bandwidth aggregation.

      <em>MUST</em> have low host CPU utilizations, equal to or better than
      current technology.

      <em>MUST</em> be possible to build I/O adapters that handle the entire SCSI
      task.

      <em>SHOULD</em> permit direct data placement architectures.

      <em>MUST NOT</em> impose complex operations on host software.

      <em>MUST</em> provide for full utilization of available link bandwidth.

      <em>MUST</em> allow an implementation to exploit parallelism (multiple
      connections) at the device interfaces and within the interconnect
      fabric.

   From <a href="#section-3.4">section 3.4</a> High Bandwidth/Bandwidth Aggregation:

      <em>MUST</em> operate over a single TCP connection.

      <em>SHOULD</em> support 'connection binding', and it <em>MUST</em> be optional to
      implement.

   From <a href="#section-4">section 4</a> Ease of Implementation/Complexity of Protocol:

      <em>SHOULD</em> keep the protocol simple.

      <em>SHOULD</em> minimize optional features.



<span class="grey">Krueger, et al.              Informational                      [Page 3]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


      <em>MUST</em> specify feature negotiation at session establishment (login).

      <em>MUST</em> operate correctly when no optional features are negotiated as
      well as when individual option negotions are unsuccessful.

   From <a href="#section-5.1">section 5.1</a> Detection of Data Corruption:

      <em>MUST</em> support a data integrity check format for use in digest
      generation.

      <em>MAY</em> use separate digest for data and headers.

      iSCSI header format <em>SHOULD</em> be extensible to include other data
      integrity digest calculation methods.

   From <a href="#section-5.2">section 5.2</a> Recovery:

      <em>MUST</em> specify mechanisms to recover in a timely fashion from
      failures on the initiator, target, or connecting infrastructure.

      <em>MUST</em> specify recovery methods for non-idempotent requests.

      <em>SHOULD</em> take into account fail-over schemes for mirrored targets or
      highly available storage configurations.

      <em>SHOULD</em> provide a method for sessions to be gracefully terminated
      and restarted that can be initiated by either the initiator or
      target.

   From <a href="#section-6">section 6</a> Interoperability:

      iSCSI protocol document <em>MUST</em> be clear and unambiguous.

   From <a href="#section-6.1">section 6.1</a> Internet Infrastructure:

      <em>MUST</em>:
      -- be compatible with both IPv4 and IPv6
      -- use TCP connections conservatively, keeping in mind there may
         be many other users of TCP on a given machine.

      <em>MUST NOT</em> require changes to existing Internet protocols.

      <em>SHOULD</em> minimize required changes to existing TCP/IP
      implementations.

      <em>MUST</em> be designed to allow future substitution of SCTP (for TCP) as
      an IP transport protocol with minimal changes to iSCSI protocol
      operation, protocol data unit (PDU) structures and formats.



<span class="grey">Krueger, et al.              Informational                      [Page 4]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   From <a href="#section-6.2">section 6.2</a> SCSI:

      Any feature SAM2 requires in a valid transport mapping <em>MUST</em> be
      specified by iSCSI.

      <em>MUST</em> specify strictly ordered delivery of SCSI commands over an
      iSCSI session between an initiator/target pair.

      The command ordering mechanism <em>SHOULD</em> seek to minimize the amount
      of communication necessary across multiple adapters doing
      transport off-load.

      <em>MUST</em> specify for each feature whether it is <em>OPTIONAL</em>, <em>RECOMMENDED</em>
      or <em>REQUIRED</em> to implement and/or use.

      <em>MUST NOT</em> require changes to the SCSI-3 command sets and SCSI
      client code except except where SCSI specifications point to
      "transport dependent" fields and behavior.

      <em>SHOULD</em> track changes to SCSI and the SCSI Architecture Model.

      <em>MUST</em> be capable of supporting all SCSI-3 command sets and device
      types.

      <em>SHOULD</em> support ACA implementation.

      <em>MUST</em> allow for the construction of gateways to other SCSI
      transports

      <em>MUST</em> reliably transport SCSI commands from the initiator to the
      target.

      <em>MUST</em> correctly deal with iSCSI packet drop, duplication,
      corruption, stale packets, and re-ordering.

   From <a href="#section-7.1">section 7.1</a> Extensible Security:

      <em>SHOULD</em> require minimal configuration and overhead in the insecure
      operation.

      <em>MUST</em> provide for strong authentication when increased security is
      required.

      <em>SHOULD</em> allow integration of new security mechanisms without
      breaking backwards compatible operation.






<span class="grey">Krueger, et al.              Informational                      [Page 5]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-6" id="page-6" href="#page-6" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   From <a href="#section-7.2">section 7.2</a> Authentication:

      <em>MAY</em> support various levels of authentication security.

      <em>MUST</em> support private authenticated login.

      iSCSI authenticated login <em>MUST</em> be resilient against attacks.

      <em>MUST</em> support data origin authentication of its communications;
      data origin authentication <em>MAY</em> be optional to use.

   From <a href="#section-7.3">section 7.3</a> Data Integrity:

      <em>SHOULD NOT</em> preclude use of additional data integrity protection
      protocols (IPSec, TLS).

   From <a href="#section-7.4">section 7.4</a> Data Confidentiality:

      <em>MUST</em> provide for the use of a data encryption protocol such as TLS
      or IPsec ESP to provide data confidentiality between iSCSI
      endpoints

   From <a href="#section-8">section 8</a> Management:

      <em>SHOULD</em> be manageable using standard IP-based management protocols.

      iSCSI protocol document <em>MUST NOT</em> define the management
      architecture for iSCSI, or make explicit references to management
      objects such as MIB variables.

   From <a href="#section-8.1">section 8.1</a> Naming:

      <em>MUST</em> support the naming architecture of SAM-2. The means by which
      an iSCSI resource is located <em>MUST</em> use or extend existing Internet
      standard resource location methods.

      <em>MUST</em> provide a means of identifying iSCSI targets by a unique
      identifier that is independent of the path on which it is found.

      The format for the iSCSI names <em>MUST</em> use existing naming
      authorities.

      An iSCSI name <em>SHOULD</em> be a human readable string in an
      international character set encoding.

      Standard Internet lookup services <em>SHOULD</em> be used to resolve iSCSI
      names.




<span class="grey">Krueger, et al.              Informational                      [Page 6]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-7" id="page-7" href="#page-7" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


      <em>SHOULD</em> deal with the complications of the new SCSI security
      architecture.

      iSCSI naming architecture <em>MUST</em> address support of SCSI 3rd party
      operations such as EXTENDED COPY.

   From <a href="#section-8.2">section 8.2</a> Discovery:

      <em>MUST</em> have no impact on the use of current IP network discovery
      techniques.

      <em>MUST</em> provide some means of determining whether an iSCSI service is
      available through an IP address.

      SCSI protocol-dependent techniques <em>SHOULD</em> be used for further
      discovery beyond the iSCSI layer.

      <em>MUST</em> provide a method of discovering, given an IP end point on its
      well-known port, the list of SCSI targets available to the
      requestor.  The use of this discovery service <em>MUST</em> be optional.

   From <a href="#section-9">section 9</a> Internet Accessability.

      <em>SHOULD</em> be scrutinized for denial of service issues and they should
      be addressed.

   From <a href="#section-9.2">section 9.2</a> Firewalls and Proxy Servers

      <em>SHOULD</em> allow deployment where functional and optimizing middle-
      boxes such as firewalls, proxy servers and NATs are present.

      use of IP addresses and TCP ports <em>SHOULD</em> be firewall friendly.

   From <a href="#section-9.3">section 9.3</a> Congestion Control and Transport Selection

      <em>MUST</em> be a good network citizen with TCP-compatible congestion
      control (as defined in [<a href="./rfc2914.html">RFC2914</a>]).

      iSCSI implementations <em>MUST NOT</em> use multiple connections as a means
      to avoid transport-layer congestion control.

<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>. iSCSI Design Considerations</span>

<span class="h3"><a class="selflink" name="section-3.1" href="#section-3.1">3.1</a>. General Discussion</span>

   Traditionally, storage controllers (e.g., disk array controllers,
   tape library controllers) have supported the SCSI-3 protocol and have
   been attached to computers by SCSI parallel bus or Fibre Channel.



<span class="grey">Krueger, et al.              Informational                      [Page 7]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-8" id="page-8" href="#page-8" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   The IP infrastructure offers compelling advantages for volume/
   block-oriented storage attachment.  It offers the opportunity to take
   advantage of the performance/cost benefits provided by competition in
   the Internet marketplace.  This could reduce the cost of storage
   network infrastructure by providing economies arising from the need
   to install and operate only a single type of network.

   In addition, the IP protocol suite offers the opportunity for a rich
   array of management, security and QoS solutions.  Organizations may
   initially choose to operate storage networks based on iSCSI that are
   independent of (isolated from) their current data networks except for
   secure routing of storage management traffic.  These organizations
   anticipated benefits from the high performance/cost of IP equipment
   and the opportunity for a unified management architecture.  As
   security and QoS evolve, it becomes reasonable to build combined
   networks with shared infrastructure; nevertheless, it is likely that
   sophisticated users will choose to keep their storage sub-networks
   isolated to afford the best control of security and QoS to ensure a
   high-performance environment tuned to storage traffic.

   Mapping SCSI over IP also provides:

      -- Extended distance ranges
      -- Connectivity to "carrier class" services that support IP

   The following applications for iSCSI are contemplated:

      -- Local storage access, consolidation, clustering and pooling (as
         in the data center)
      -- Network client access to remote storage (eg. a "storage service
         provider")
      -- Local and remote synchronous and asynchronous mirroring between
         storage controllers
      -- Local and remote backup and recovery

   iSCSI will support the following topologies:

      -- Point-to-point direct connections
      -- Dedicated storage LAN, consisting of one or more LAN segments
      -- Shared LAN, carrying a mix of traditional LAN traffic plus
         storage traffic
      -- LAN-to-WAN extension using IP routers or carrier-provided "IP
         Datatone"
      -- Private networks and the public Internet

   IP LAN-WAN routers may be used to extend the IP storage network to
   the wide area, permitting remote disk access (as for a storage
   utility), synchronous and asynchronous remote mirroring, and remote



<span class="grey">Krueger, et al.              Informational                      [Page 8]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-9" id="page-9" href="#page-9" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   backup and restore (as for tape vaulting).  In the WAN,  using TCP
   end-to-end avoids the need for specialized equipment for protocol
   conversion, ensures data reliability, copes with network congestion,
   and provides retransmission strategies adapted to WAN delays.

   The iSCSI technology deployment will involve the following elements:

   (1)  Conclusion of a complete protocol standard and supporting
        implementations;
   (2)  Development of Ethernet storage NICs and related driver and
        protocol software; [NOTE: high-speed applications of iSCSI are
        expected to require significant portions of the iSCSI/TCP/IP
        implementation in hardware to achieve the necessary throughput.]
   (3)  Development of compatible storage controllers; and
   (4)  The likely development of translating gateways to provide
        connectivity between the Ethernet storage network and the Fibre
        Channel and/or parallel-bus SCSI domains.
   (5)  Development of specifications for iSCSI device management such
        as MIBs, LDAP or XML schemas, etc.
   (6)  Development of management and directory service applications to
        support a robust SAN infrastructure.

   Products could initially be offered for Gigabit Ethernet attachment,
   with rapid migration to 10 GbE.  For performance competitive with
   alternative SCSI transports, it will be necessary to implement the
   performance path of the full protocol stack in hardware.  These new
   storage NICs might perform full-stack processing of a complete SCSI
   task, analogous to today's SCSI and Fibre Channel HBAs, and might
   also support all host protocols that use TCP (NFS, CIFS, HTTP, etc).

   The charter of the IETF IP Storage Working Group (IPSWG) describes
   the broad goal of mapping SCSI to IP using a transport that has
   proven congestion avoidance behavior and broad implementation on a
   variety of platforms.  Within that broad charter, several transport
   alternatives may be considered.  Initial IPS work focuses on TCP, and
   this requirements document is restricted to that domain of interest.

<span class="h3"><a class="selflink" name="section-3.2" href="#section-3.2">3.2</a>. Performance/Cost</span>

   In general, iSCSI <em>MUST</em> allow implementations to equal or improve on
   the current state of the art for SCSI interconnects.  This goal
   breaks down into several types of requirement:

   Cost competitive with alternative storage network technologies:

   In order to be adopted by vendors and the user community, the iSCSI
   protocol <em>MUST</em> enable cost competitive implementations when compared
   to other SCSI transports (Fibre Channel).



<span class="grey">Krueger, et al.              Informational                      [Page 9]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-10" id="page-10" href="#page-10" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   Low delay communication:

   Conventional storage access is of a stop-and-wait remote procedure
   call type.  Applications typically employ very little pipelining of
   their storage accesses, and so storage access delay directly impacts
   performance.  The delay imposed by current storage interconnects,
   including protocol processing, is generally in the range of 100
   microseconds.  The use of caching in storage controllers means that
   many storage accesses complete almost instantly, and so the delay of
   the interconnect can have a high relative impact on overall
   performance.  When stop-and-wait IO is used, the delay of the
   interconnect will affect performance.  The iSCSI protocol <em>SHOULD</em>
   minimize control overhead, which adds to delay.

   Low host CPU utilization, equal to or better than current technology:

   For competitive performance, the iSCSI protocol <em>MUST</em> allow three key
   implementation goals to be realized:

   (1)  iSCSI <em>MUST</em> make it possible to build I/O adapters that handle an
        entire SCSI task, as alternative SCSI transport implementations
        do.
   (2)  The protocol <em>SHOULD</em> permit direct data placement ("zero-copy"
        memory architectures, where the I/O adapter reads or writes host
        memory exactly once per disk transaction.
   (3)  The protocol <em>SHOULD NOT</em> impose complex operations on the host
        software, which would increase host instruction path length
        relative to alternatives.

   Direct data placement (zero-copy iSCSI):

   Direct data placement refers to iSCSI data being placed directly "off
   the wire" into the allocated location in memory with no intermediate
   copies.  Direct data placement significantly reduces the memory bus
   and I/O bus loading in the endpoint systems, allowing improved
   performance.  It reduces the memory required for NICs, possibly
   reducing the cost of these solutions.

   This is an important implementation goal.  In an iSCSI system, each
   of the end nodes (for example host computer and storage controller)
   should have ample memory, but the intervening nodes (NIC, switches)
   typically will not.









<span class="grey">Krueger, et al.              Informational                     [Page 10]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-11" id="page-11" href="#page-11" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   High bandwidth, bandwidth aggregation:

   The bandwidth (transfer rate, MB/sec) supported by storage
   controllers is rapidly increasing, due to several factors:

      1. Increase in disk spindle and controller performance;
      2. Use of ever-larger caches, and improved caching algorithms;
      3. Increased scale of storage controllers (number of supported
         spindles, speed of interconnects).

   The iSCSI protocol <em>MUST</em> provide for full utilization of available
   link bandwidth.  The protocol <em>MUST</em> also allow an implementation to
   exploit parallelism (multiple connections) at the device interfaces
   and within the interconnect fabric.

   The next two sections further discuss the need for direct data
   placement and high bandwidth.

<span class="h3"><a class="selflink" name="section-3.3" href="#section-3.3">3.3</a>. Framing</span>

   Framing refers to the addition of information in a header, or the
   data stream to allow implementations to locate the boundaries of an
   iSCSI protocol data unit (PDU) within the TCP byte stream.  There are
   two technical requirements driving framing: interfacing needs, and
   accelerated processing needs.

   A framing solution that addresses the "interfacing needs" of the
   iSCSI protocol will facilitate the implementation of a message-based
   upper layer protocol (iSCSI) on top of an underlying byte streaming
   protocol (TCP).  Since TCP is a reliable transport, this can be
   accomplished by including a length field in the iSCSI header. Finding
   the protocol frame assumes that the receiver will parse from the
   beginning of the TCP data stream, and never make a mistake (lose
   alignment on packet headers).

   The other technical requirement for framing, "accelerated
   processing", stems from the need to handle increasingly higher data
   rates in the physical media interface.  Two needs arise from higher
   data rates:

   (1)  LAN environment - NIC vendors seek ways to provide "zero-copy"
        methods of moving data directly from the wire into application
        buffers.

   (2)  WAN environment- the emergence of high bandwidth, high latency,
        low bit error rate physical media places huge buffer
        requirements on the physical interface solutions.




<span class="grey">Krueger, et al.              Informational                     [Page 11]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-12" id="page-12" href="#page-12" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   First, vendors are producing network processing hardware that
   offloads network protocols to hardware solutions to achieve higher
   data rates.  The concept of "zero-copy" seeks to store blocks of data
   in appropriate memory locations (aligned) directly off the wire, even
   when data is reordered due to packet loss.  This is necessary to
   drive actual data rates of 10 Gigabit/sec and beyond.

   Secondly, in order for iSCSI to be successful in the WAN arena it
   must be possible to operate efficiently in high bandwidth, high delay
   networks.  The emergence of multi-gigabit IP networks with latencies
   in the tens to hundreds of milliseconds presents a challenge.  To
   fill such large pipes, it is necessary to have tens of megabytes of
   outstanding requests from the application.  In addition, some
   protocols potentially require tens of megabytes at the transport
   layer to deal with buffering for reassembly of data when packets are
   received out-of-order.

   In both cases, the issue is the desire to minimize the amount of
   memory and memory bandwidth required for iSCSI hardware solutions.

   Consider that a network pipe at 10 Gbps x 200 msec holds 250 MB.
   [Assume land-based communication with a spot half way around the
   world at the equator.  Ignore additional distance due to cable
   routing.  Ignore repeater and switching delays; consider only a
   speed-of-light delay of 5 microsec/km.  The circumference of the
   globe at the equator is approx. 40000 km (round-trip delay must be
   considered to keep the pipe full).  10 Gb/sec x 40000 km x 5
   microsec/km x B / 8b = 250 MB].  In a conventional TCP
   implementation, loss of a TCP segment means that stream processing
   <em>MUST</em> stop until that segment is recovered, which takes at least a
   time of &lt;network round trip&gt; to accomplish.  Following the example
   above, an implementation would be obliged to catch 250 MB of data
   into an anonymous buffer before resuming stream processing; later,
   this data would need to be moved to its proper location.  Some
   proponents of iSCSI seek some means of putting data directly where it
   belongs, and avoiding extra data movement in the case of segment
   drop.  This is a key concept in understanding the debate behind
   framing methodologies.

   The framing of the iSCSI protocol impacts both the "interfacing
   needs" and the "accelerated processing needs", however, while
   including a length in a header may suffice for the "interfacing
   needs", it will not serve the direct data placement needs.  The
   framing mechanism developed should allow resynchronization of packet
   boundaries even in the case where a packet is temporarily missing in
   the incoming data stream.





<span class="grey">Krueger, et al.              Informational                     [Page 12]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-13" id="page-13" href="#page-13" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


<span class="h3"><a class="selflink" name="section-3.4" href="#section-3.4">3.4</a>. High bandwidth, bandwidth aggregation</span>

   At today's block storage transport throughput, any single link can be
   saturated by the volume of storage traffic.  Scientific data
   applications and data replication are examples of storage
   applications that push the limits of throughput.

   Some applications, such as log updates, streaming tape, and
   replication, require ordering of updates and thus ordering of SCSI
   commands.  An initiator may maintain ordering by waiting for each
   update to complete before issuing the next (a.k.a. synchronous
   updates).  However, the throughput of synchronous updates decreases
   inversely with increases in network distances.

   For greater throughput, the SCSI task queuing mechanism allows an
   initiator to have multiple commands outstanding at the target
   simultaneously and to express ordering constraints on the execution
   of those commands.  The task queuing mechanism is only effective if
   the commands arrive at the target in the order they were presented to
   the initiator (FIFO order).  The iSCSI standard must provide an
   ordered transport of SCSI commands, even when commands are sent along
   different network paths (see <a href="#section-5.2">Section 5.2</a> SCSI).  This is referred to
   as "command ordering".

   The iSCSI protocol <em>MUST</em> operate over a single TCP connection to
   accommodate lower cost implementations.  To enable higher performance
   storage devices, the protocol should specify a means to allow
   operation over multiple connections while maintaining the behavior of
   a single SCSI port.  This would allow the initiator and target to use
   multiple network interfaces and multiple paths through the network
   for increased throughput.  There are a few potential ways to satisfy
   the multiple path and ordering requirements.

   A popular way to satisfy the multiple-path requirement is to have a
   driver above the SCSI layer instantiate multiple copies of the SCSI
   transport, each communicating to the target along a different path.
   "Wedge" drivers use this technique today to attain high performance.
   Unfortunately, wedge drivers must wait for acknowledgement of
   completion of each request (stop-and-wait) to ensure ordered updates.

   Another approach might be for iSCSI protocol to use multiple
   instances of its underlying transport (e.g. TCP).  The iSCSI layer
   would make these independent transport instances appear as one SCSI
   transport instance and maintain the ability to do ordered SCSI
   command queuing.  The document will refer to this technique as
   "connection binding" for convenience.





<span class="grey">Krueger, et al.              Informational                     [Page 13]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-14" id="page-14" href="#page-14" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   The iSCSI protocol <em>SHOULD</em> support connection binding, and it <em>MUST</em> be
   optional to implement.

   In the presence of connection binding, there are two ways to assign
   features to connections.  In the symmetric approach, all the
   connections are identical from a feature standpoint.  In the
   asymmetric model, connections have different features.  For example,
   some connections may be used primarily for data transfers whereas
   others are used primarily for SCSI commands.

   Since the iSCSI protocol must support the case where there was only
   one transport connection, the protocol must have command, data, and
   status travel over the same connection.

   In the case of multiple connections, the iSCSI protocol must keep the
   command and its associated data and status on the same connection
   (connection allegiance).  Sending data and status on the same
   connection is desirable because this guarantees that status is
   received after the data (TCP provides ordered delivery).  In the case
   where each connection is managed by a separate processor, allegiance
   decreases the need for inter-processor communication.  This symmetric
   approach is a natural extension of the single connection approach.

   An alternate approach that was extensively discussed involved sending
   all commands on a single connection and the associated data and
   status on a different connection (asymmetric approach).  In this
   scheme, the transport ensures the commands arrive in order.  The
   protocol on the data and status connections is simpler, perhaps
   lending itself to a simpler realization in hardware.  One
   disadvantage of this approach is that the recovery procedure is
   different if a command connection fails vs. a data connection.  Some
   argued that this approach would require greater inter-processor
   communication when connections are spread across processors.

   The reader may reference the mail archives of the IPS mailing list
   between June and September of 2000 for extensive discussions on
   symmetric vs asymmetric connection models.

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>. Ease of implementation/complexity of protocol</span>

   Experience has shown that adoption of a protocol by the Internet
   community is inversely proportional to its complexity.  In addition,
   the simpler the protocol, the easier it is to diagnose problems. The
   designers of iSCSI <em>SHOULD</em> strive to fulfill the requirements of the
   creating a SCSI transport over IP, while keeping the protocol as
   simple as possible.





<span class="grey">Krueger, et al.              Informational                     [Page 14]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-15" id="page-15" href="#page-15" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   In the interest of simplicity, iSCSI <em>SHOULD</em> minimize optional
   features.  When features are deemed necessary, the protocol <em>MUST</em>
   specify feature negotiation at session establishment (login).  The
   iSCSI transport <em>MUST</em> operate correctly when no optional features are
   negotiated as well as when individual option negotiations are
   unsuccessful.

<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>. Reliability and Availability</span>

<span class="h3"><a class="selflink" name="section-5.1" href="#section-5.1">5.1</a>. Detection of Data Corruption</span>

   There have been several research papers that suggest that the TCP
   checksum calculation allows a certain number of bit errors to pass
   undetected [10] [11].

   In order to protect against data corruption, the iSCSI protocol <em>MUST</em>
   support a data integrity check format for use in digest generation.

   The iSCSI protocol <em>MAY</em> use separate digests for data and headers.  In
   an iSCSI proxy or gateway situation, the iSCSI headers are removed
   and re-built, and the TCP stream is terminated on either side.  This
   means that even the TCP checksum is removed and recomputed within the
   gateway.  To ensure the protection of commands, data, and status the
   iSCSI protocol <em>MUST</em> include a CRC or other digest mechanism that is
   computed on the SCSI data block itself, as well as on each command
   and status message.  Since gateways may strip iSCSI headers and
   rebuild them, a separate header CRC is required.  Two header digests,
   one for invariant portions of the header (addresses) and one for the
   variant portion would provide protection against changes to portions
   of the header that should never be changed by middle boxes (eg,
   addresses).

   The iSCSI header format <em>SHOULD</em> be extensible to include other digest
   calculation methods.

<span class="h3"><a class="selflink" name="section-5.2" href="#section-5.2">5.2</a>. Recovery</span>

   The SCSI protocol was originally designed for a parallel bus
   transport that was highly reliable.  SCSI applications tend to assume
   that transport errors never happen, and when they do, SCSI
   application recovery tends to be expensive in terms of time and
   computational resources.

   iSCSI protocol design, while placing an emphasis on simplicity, <em>MUST</em>
   lead to timely recovery from failure of initiator, target, or
   connecting network infrastructure (cabling, data path equipment such
   as routers, etc).




<span class="grey">Krueger, et al.              Informational                     [Page 15]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-16" id="page-16" href="#page-16" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   iSCSI <em>MUST</em> specify recovery methods for non-idempotent requests, such
   as operations on tape drives.

   The iSCSI protocol error recover mechanism <em>SHOULD</em> take into account
   fail-over schemes for mirrored targets or highly available storage
   configurations that provide paths to target data through multiple
   "storage servers".  This would provide a basis for layered
   technologies like high availability and clustering.

   The iSCSI protocol <em>SHOULD</em> also provide a method for sessions to be
   gracefully terminated and restarted that can be initiated by either
   the initiator or target.  This provides the ability to gracefully
   fail over an initiator or target, or reset a target after performing
   maintenance tasks such as upgrading software.

<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>. Interoperability</span>

   It must be possible for initiators and targets that implement the
   required portions of the iSCSI specification to interoperate.  While
   this requirement is so obvious that it doesn't seem worth mentioning,
   if the protocol specification contains ambiguous wording, different
   implementations may not interoperate.  The iSCSI protocol document
   <em>MUST</em> be clear and unambiguous.

<span class="h3"><a class="selflink" name="section-6.1" href="#section-6.1">6.1</a>. Internet infrastructure</span>

   The iSCSI protocol <em>MUST</em>:

      -- be compatible with both IPv4 and IPv6.
      -- use TCP connections conservatively, keeping in mind there may
         be many other users of TCP on a given machine.

   The iSCSI protocol <em>MUST NOT</em> require changes to existing Internet
   protocols and <em>SHOULD</em> minimize required changes to existing TCP/IP
   implementations.

   iSCSI <em>MUST</em> be designed to allow future substitution of SCTP (for TCP)
   as an IP transport protocol with minimal changes to iSCSI protocol
   operation, protocol data unit (PDU) structures and formats. Although
   not widely implemented today, SCTP has many design features that make
   it a desirable choice for future iSCSI enhancement.

<span class="h3"><a class="selflink" name="section-6.2" href="#section-6.2">6.2</a>. SCSI</span>

   In order to be considered a SCSI transport, the iSCSI standard must
   comply with the requirements of the SCSI Architecture Model [SAM-2]
   for a SCSI transport.  Any feature SAM2 requires in a valid transport
   mapping <em>MUST</em> be specified by iSCSI.  The iSCSI protocol document <em>MUST</em>



<span class="grey">Krueger, et al.              Informational                     [Page 16]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-17" id="page-17" href="#page-17" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   specify for each feature whether it is <em>OPTIONAL</em>, <em>RECOMMENDED</em> or
   <em>REQUIRED</em> to implement and/or use.

   The SCSI Architectural Model [SAM-2] indicates an expectation that
   the SCSI  transport provides ordering of commands on an initiator
   target-LUN granularity.  There has been much discussion on the IPS
   reflector and in working group meetings regarding the means to ensure
   this ordering.  The rough consensus is that iSCSI <em>MUST</em> specify
   strictly ordered delivery of SCSI commands over an iSCSI session
   between an initiator/target pair, even in the presence of transport
   errors.  This command ordering mechanism <em>SHOULD</em> seek to minimize the
   amount of communication necessary across multiple adapters doing
   transport off-load.  If an iSCSI implementation does not require
   ordering it can instantiate multiple sessions per initiator-target
   pair.

   iSCSI is intended to be a new SCSI "transport" [SAM2].  As a mapping
   of SCSI over TCP, iSCSI requires interaction with both T10 and IETF.
   However, the iSCSI protocol <em>MUST NOT</em> require changes to the SCSI-3
   command sets and SCSI client code except where SCSI specifications
   point to "transport dependent" fields and behavior.  For example,
   changes to SCSI documents will be necessary to reflect lengthier
   iSCSI target names and potentially lengthier timeouts. Collaboration
   with T10 will be necessary to achieve this requirement.

   The iSCSI protocol <em>SHOULD</em> track changes to SCSI and the SCSI
   Architecture Model.

   The iSCSI protocol <em>MUST</em> be capable of supporting all SCSI-3 command
   sets and device types. The primary focus is on supporting 'larger'
   devices: host computers and storage controllers (disk arrays, tape
   libraries).  However, other command sets (printers, scanners) must be
   supported.  These requirements <em>MUST NOT</em> be construed to mean that
   iSCSI must be natively implementable on all of today's SCSI devices,
   which might have limited processing power or memory.

   ACA (Auto Contingent Allegiance) is an optional SCSI mechanism that
   stops execution of a sequence of dependent SCSI commands when one of
   them fails.  The situation surrounding it is complex - T10 specifies
   ACA in SAM2, and hence iSCSI must support it and endeavor to make
   sure that ACA gets implemented sufficiently (two independent
   interoperable implementations) to avoid dropping ACA in the
   transition from Proposed Standard to Draft Standard.  This implies
   iSCSI <em>SHOULD</em> support ACA implementation.

   The iSCSI protocol <em>MUST</em> allow for the construction of gateways to
   other SCSI transports, including parallel SCSI [SPI-X] and to SCSI
   FCP[FCP, FCP-2].  It <em>MUST</em> be possible to construct "translating"



<span class="grey">Krueger, et al.              Informational                     [Page 17]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-18" id="page-18" href="#page-18" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   gateways so that iSCSI hosts can interoperate with SCSI-X devices; so
   that SCSI-X devices can communicate over an iSCSI network; and so
   that SCSI-X hosts can use iSCSI targets (where SCSI-X refers to
   parallel SCSI, SCSI-FCP, or SCSI over any other transport).  This
   requirement is implied by support for SAM-2, but is worthy of
   emphasis.  These are true application protocol gateways, and not just
   bridge/routers.  The different standards have only the SCSI-3 command
   set layer in common.  These gateways are not mere packet forwarders.

   The iSCSI protocol <em>MUST</em> reliably transport SCSI commands from the
   initiator to the target.  According to [SAM-2, p. 17.] "The function
   of the service delivery subsystem is to transport an error-free copy
   of the request or response between the sender and the receiver"
   [SAM-2, p. 22].  The iSCSI protocol <em>MUST</em> correctly deal with iSCSI
   packet drop, duplication, corruption, stale packets, and re-ordering.

<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>. Security Considerations</span>

   In the past, directly attached storage systems have implemented
   minimal security checks because the physical connection offered
   little chance for attack.  Transporting block storage (SCSI) over IP
   opens a whole new opportunity for a variety of malicious attacks.
   Attacks can take the active form (identity spoofing, man-in-the-
   middle) or the passive form (eavesdropping).

<span class="h3"><a class="selflink" name="section-7.1" href="#section-7.1">7.1</a>. Extensible Security</span>

   The security services required for communications depends on the
   individual network configurations and environments.  Organizations
   are setting up Virtual Private Networks(VPN), also known as
   Intranets, that will require one set of security functions for
   communications within the VPN and possibly many different security
   functions for communications outside the VPN to support
   geographically separate components.  The iSCSI protocol is applicable
   to a wide range of internet working environments that may employ
   different security policies.  iSCSI <em>MUST</em> provide for strong
   authentication when increased security is required.  The protocol
   <em>SHOULD</em> require minimal configuration and overhead in the insecure
   operation, and allow integration of new security mechanisms without
   breaking backwards compatible operation.

<span class="h3"><a class="selflink" name="section-7.2" href="#section-7.2">7.2</a>. Authentication</span>

   The iSCSI protocol <em>MAY</em> support various levels of authentication
   security, ranging from no authentication to secure authentication
   using public or private keys.

   The iSCSI protocol <em>MUST</em> support private authenticated login.



<span class="grey">Krueger, et al.              Informational                     [Page 18]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-19" id="page-19" href="#page-19" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   Authenticated login aids the target in blocking the unauthorized use
   of SCSI resources.  "Private" authenticated login mandates protected
   identity exchange (no clear text passwords at a minimum).  Since
   block storage confidentiality is considered critical in enterprises
   and many IP networks may have access holes, organizations will want
   to protect their iSCSI resources.

   The iSCSI authenticated login <em>MUST</em> be resilient against attacks since
   many IP networks are vulnerable to packet inspection.

   In addition, the iSCSI protocol <em>MUST</em> support data origin
   authentication of its communications; data origin authentication <em>MAY</em>
   be optional to use.  Data origin authentication is critical since IP
   networks are vulnerable to source spoofing, where a malicious third
   party pretends to send packets from the initiator's IP address. These
   requirements should be met using standard Internet protocols such as
   IPsec or TLS.  The endpoints may negotiate the authentication method,
   optionally none.

<span class="h3"><a class="selflink" name="section-7.3" href="#section-7.3">7.3</a>. Data Integrity</span>

   The iSCSI protocol <em>SHOULD NOT</em> preclude use of additional data
   integrity protection protocols (IPSec, TLS).

<span class="h3"><a class="selflink" name="section-7.4" href="#section-7.4">7.4</a>. Data Confidentiality</span>

   Block storage is used for storing sensitive information, where data
   confidentiality is critical.  An application may encrypt the data
   blocks before writing them to storage - this provides the best
   protection for the application.  Even if the storage or
   communications are compromised, the attacker will have difficulty
   reading the data.

   In certain environments, encryption may be desired to provide an
   extra assurance of confidentiality.  An iSCSI implementation <em>MUST</em>
   provide for the use of a data encryption protocol such as TLS or
   IPsec ESP to provide data confidentiality between iSCSI endpoints.

<span class="h2"><a class="selflink" name="section-8" href="#section-8">8</a>. Management</span>

   iSCSI implementations <em>SHOULD</em> be manageable using standard IP-based
   management protocols.  However, the iSCSI protocol document <em>MUST NOT</em>
   define the management architecture for iSCSI within the network
   infrastructure.  iSCSI will be yet another resource service within a
   complex environment of network resources (printers, file servers,
   NAS, application servers, etc).  There will certainly be efforts to
   design how the "block storage service" that iSCSI devices provide is
   integrated into a comprehensive, shared model, network management



<span class="grey">Krueger, et al.              Informational                     [Page 19]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-20" id="page-20" href="#page-20" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   environment.  A "network administrator" (or "storage administrator")
   will desire to have integrated applications for assigning user names,
   resource names, etc. and indicating access rights.  iSCSI devices
   presumably will want to interact with these integrated network
   management applications.  The iSCSI protocol document will not
   attempt to solve that set of problems, or specify means for devices
   to provide management agents.  In fact, there should be no mention of
   MIBs or any other means of managing iSCSI devices as explicit
   references in the iSCSI protocol document, because management data
   and protocols change with the needs of the environment and the
   business models of the management applications.

<span class="h3"><a class="selflink" name="section-8.1" href="#section-8.1">8.1</a>. Naming</span>

   Whenever possible, iSCSI <em>MUST</em> support the naming architecture of
   SAM-2.  Deviations and uncertainties <em>MUST</em> be made explicit, and
   comments and resolutions worked out between ANSI T10 and the IPS
   working group.

   The means by which an iSCSI resource is located <em>MUST</em> use or extend
   existing Internet standard resource location methods.  <a href="./rfc2348.html">RFC 2348</a> [12]
   specifies URL syntax and semantics which should be sufficiently
   extensible for the iSCSI resource.

   The iSCSI protocol <em>MUST</em> provide a means of identifying an iSCSI
   storage device by a unique identifier that is independent of the path
   on which it is found.  This name will be used to correlate alternate
   paths to the same device.  The format for the iSCSI names <em>MUST</em> use
   existing naming authorities, to avoid creating new central
   administrative tasks.  An iSCSI name <em>SHOULD</em> be a human readable
   string in an international character set encoding.

   Standard Internet lookup services <em>SHOULD</em> be used to resolve names.
   For example, Domain Name Services (DNS) <em>MAY</em> be used to resolve the
   &lt;hostname&gt; portion of a URL to one or multiple IP addresses.  When a
   hostname resolves to multiple addresses, these addresses should be
   equivalent for functional (possibly not performance) purposes.  This
   means that the addresses can be used interchangeably as long as
   performance isn't a concern.  For example, the same set of SCSI
   targets <em>MUST</em> be accessible from each of these addresses.

   An iSCSI device naming scheme <em>MUST</em> interact correctly with the
   proposed SCSI security architecture [99-245r9].  Particular attention
   must be directed to the proxy naming architecture defined by the new
   security model.  In this new model,  a host is identified by an
   Access ID, and SCSI Logical Unit Numbers (LUNs) can be mapped in a
   manner that gives each AccessID a unique LU map.  Thus, a given LU
   within a target may be addressed by different LUNs.



<span class="grey">Krueger, et al.              Informational                     [Page 20]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-21" id="page-21" href="#page-21" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   The iSCSI naming architecture <em>MUST</em> address support of SCSI 3rd party
   operations such as EXTENDED COPY.  The key issue here relates to the
   naming architecture for SCSI LUs - iSCSI must provide a means of
   passing a name or handle between parties.  iSCSI must specify a means
   of providing a name or handle that could be used in the XCOPY command
   and fit within the available space allocated by that command.  And it
   must be possible, of course, for the XCOPY target (the third party)
   to de-reference the name to the correct target and LU.

<span class="h3"><a class="selflink" name="section-8.2" href="#section-8.2">8.2</a>. Discovery</span>

   iSCSI <em>MUST</em> have no impact on the use of current IP network discovery
   techniques.  Network management platforms discover IP addresses and
   have various methods of probing the services available through these
   IP addresses.  An iSCSI service should be evident using similar
   techniques.

   The iSCSI specifications <em>MUST</em> provide some means of determining
   whether an iSCSI service is available through an IP address.  It is
   expected that iSCSI will be a point of service in a host, just as
   SNMP, etc are points of services, associated with a well known port
   number.

   SCSI protocol-dependent techniques <em>SHOULD</em> be used for further
   discovery beyond the iSCSI layer.  Discovery is a complex, multi-
   layered process.  The SCSI protocol specifications provide specific
   commands for discovering LUs and the commands associated with this
   process will also work over iSCSI.

   The iSCSI protocol <em>MUST</em> provide a method of discovering, given an IP
   end point on its well-known port, the list of SCSI targets available
   to the requestor.  The use of this discovery service <em>MUST</em> be
   optional.

   Further discovery guidelines are outside the scope of this document
   and may be addressed in separate Informational documents.

<span class="h2"><a class="selflink" name="section-9" href="#section-9">9</a>. Internet Accessibility</span>

<span class="h3"><a class="selflink" name="section-9.1" href="#section-9.1">9.1</a>. Denial of Service</span>

   As with all services, the denial of service by either incorrect
   implementations or malicious agents is always a concern.  All aspects
   of the iSCSI protocol <em>SHOULD</em> be scrutinized for potential denial of
   service issues, and guarded against as much as possible.






<span class="grey">Krueger, et al.              Informational                     [Page 21]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-22" id="page-22" href="#page-22" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


<span class="h3"><a class="selflink" name="section-9.2" href="#section-9.2">9.2</a>. NATs, Firewalls and Proxy servers</span>

   NATs (Network Address Translator), firewalls, and proxy servers are a
   reality in today's Internet.  These devices present a number of
   challenges to device access methods being developed for iSCSI.  For
   example, specifying a URL syntax for iSCSI resource connection allows
   an initiator to address an iSCSI target device both directly and
   through an iSCSI proxy server or NAT.  iSCSI <em>SHOULD</em> allow deployment
   where functional and optimizing middle-boxes such as firewalls, proxy
   servers and NATs are present.


   The iSCSI protocol's use of IP addressing and TCP port numbers <em>MUST</em>
   be firewall friendly.  This means that all connection requests should
   normally be addressed to a specific, well-known TCP port.  That way,
   firewalls can filter based on source and destination IP addresses,
   and destination (target) port number.  Additional TCP connections
   would require different source port numbers (for uniqueness), but
   could be opened after a security dialogue on the control channel.

   It's important that iSCSI operate through a firewall to provide a
   possible means of defending against Denial of Service (DoS) assaults
   from less-trusted areas of the network.  It is assumed that a
   firewall will have much greater processing power for dismissing bogus
   connection requests than end nodes.

<span class="h3"><a class="selflink" name="section-9.3" href="#section-9.3">9.3</a>. Congestion Control and Transport Selection</span>

   The iSCSI protocol <em>MUST</em> be a good network citizen with proven
   congestion control (as defined in [<a href="./rfc2914.html">RFC2914</a>]).  In addition, iSCSI
   implementations <em>MUST NOT</em> use multiple connections as a means to avoid
   transport-layer congestion control.

<span class="h2"><a class="selflink" name="section-10" href="#section-10">10</a>. Definitions</span>

   Certain definitions are offered here, with references to the original
   document where applicable, in order to clarify the discussion of
   requirements.  Definitions without references are the work of the
   authors and reviewers of this document.

   Logical Unit (LU): A target-resident entity that implements a device
   model and executes SCSI commands sent by an application client [SAM-
   2, sec. 3.1.50, p. 7].

   Logical Unit Number (LUN): A 64-bit identifier for a logical unit
   [SAM-2, sec. 3.1.52, p. 7].





<span class="grey">Krueger, et al.              Informational                     [Page 22]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-23" id="page-23" href="#page-23" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   SCSI Device:  A device that is connected to a service delivery
   subsystem and supports a SCSI application protocol [SAM-2, sec.
   3.1.78, p. 9].

   Service Delivery Port (SDP): A device-resident interface used by the
   application client, device server, or task manager to enter and
   retrieve requests and responses from the service delivery subsystem.
   Synonymous with port (SAM-2 sec. 3.1.61) [SAM-2, sec. 3.1.89, p. 9].

   Target: A SCSI device that receives a SCSI command and directs it to
   one or more logical units for execution [SAM-2 sec. 3.1.97, p. 10].

   Task: An object within the logical unit representing the work
   associated with a command or a group of linked commands [SAM-2, sec.
   3.1.98, p. 10].

   Transaction: A cooperative interaction between two objects, involving
   the exchange of information or the execution of some service by one
   object on behalf of the other [SAM-2, sec. 3.1.109, p. 10].

<span class="h2"><a class="selflink" name="section-11" href="#section-11">11</a>.  References</span>

   1.   Bradner, S., "The Internet Standards Process -- Revision 3", <a href="./bcp9.html">BCP</a>
        <a href="./bcp9.html">9</a>, <a href="./rfc2026.html">RFC 2026</a>, October 1996.

   2.   Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", <a href="./bcp14.html">BCP 14</a>, <a href="./rfc2119.html">RFC 2119</a>, March 1997.

   3.   [SAM-2] ANSI NCITS.  Weber, Ralph O., editor.  SCSI Architecture
        Model -2 (SAM-2).  T10 Project 1157-D.  rev 23, 16 Mar 2002.

   4.   [SPC-2] ANSI NCITS.  Weber, Ralph O., editor.  SCSI Primary
        Commands   2 (SPC-2).  T10 Project 1236-D.  rev 20, 18 July
        2001.

   5.   [CAM-3] ANSI NCITS.  Dallas, William D., editor.  Information
        Technology - Common Access Method - 3 (CAM-3)).  X3T10 Project
        990D.  rev 3, 16 Mar 1998.

   6.   [99-245r8] Hafner, Jim.  A Detailed Proposal for Access
        Controls.  T10/99-245 revision 9, 26 Apr 2000.

   7.   [SPI-X] ANSI NCITS.  SCSI Parallel Interface - X.

   8.   [FCP] ANSI NCITS.  SCSI-3 Fibre Channel Protocol [ANSI
        X3.269:1996].





<span class="grey">Krueger, et al.              Informational                     [Page 23]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-24" id="page-24" href="#page-24" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


   9.   [FCP-2] ANSI NCITS.  SCSI-3 Fibre Channel Protocol - 2
        [T10/1144-D].

   10.  Paxon, V. End-to-end internet packet dynamics, IEEE Transactions
        on Networking 7,3 (June 1999) pg 277-292.

   11.  Stone J., Partridge, C. When the CRC and TCP checksum disagree,
        ACM Sigcomm (Sept. 2000).

   12.  Malkin, G. and A. Harkin, "TFTP Blocksize Option", <a href="./rfc2348.html">RFC 2348</a>, May
        1998.

   13.  Floyd, S., "Congestion Control Principles", <a href="./bcp14.html">BCP 14</a>, <a href="./rfc2914.html">RFC 2914</a>,
        September 2000.

<span class="h2"><a class="selflink" name="section-12" href="#section-12">12</a>.  Acknowledgements</span>

   Special thanks to Julian Satran, IBM and David Black, EMC for their
   extensive review comments.
































<span class="grey">Krueger, et al.              Informational                     [Page 24]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-25" id="page-25" href="#page-25" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


<span class="h2"><a class="selflink" name="section-13" href="#section-13">13</a>.  Author's Addresses</span>

   Address comments to:

   Marjorie Krueger
   Hewlett-Packard Corporation
   8000 Foothills Blvd
   Roseville, CA 95747-5668, USA
   Phone: +1 916 785-2656
   EMail: marjorie_krueger@hp.com

   Randy Haagens
   Hewlett-Packard Corporation
   8000 Foothills Blvd
   Roseville, CA 95747-5668, USA
   Phone: +1 916 785-4578
   EMail: Randy_Haagens@hp.com

   Costa Sapuntzakis
   Stanford University
   353 Serra Mall Dr #407
   Stanford, CA 94305
   Phone: 650-723-2458
   EMail: csapuntz@stanford.edu

   Mark Bakke
   Cisco Systems, Inc.
   6450 Wedgwood Road
   Maple Grove, MN 55311
   Phone: +1 763 398-1054
   EMail: mbakke@cisco.com




















<span class="grey">Krueger, et al.              Informational                     [Page 25]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-26" id="page-26" href="#page-26" class="invisible"> </a>
<span class="grey"><a href="./rfc3347.html">RFC 3347</a>      iSCSI Requirements and Design Considerations     July 2002</span>


<span class="h2"><a class="selflink" name="section-14" href="#section-14">14</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Krueger, et al.              Informational                     [Page 26]

</pre><br />
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.120, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>
</body>
</html>
